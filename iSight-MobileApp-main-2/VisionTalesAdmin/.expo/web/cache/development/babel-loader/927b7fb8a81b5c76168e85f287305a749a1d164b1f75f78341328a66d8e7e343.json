{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect } from 'react';\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { TouchableOpacityComponent } from \"react-native-web/dist/index\";\nimport Quiz from \"./components/QuizQuestion\";\nimport * as SQLite from 'expo-sqlite';\nimport NavButton from \"./components/NavButton\";\nimport MainText from \"./components/MainText\";\nimport ViewVideos from \"./ViewVideos\";\nimport CountryPicker from 'react-native-country-picker-modal';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar db = SQLite.openDatabase('VisionTalesDB.db');\nvar DemographicQuiz = function DemographicQuiz(_ref) {\n  var navigation = _ref.navigation,\n    route = _ref.route;\n  var questions = [\"What is your gender?\", \"What is your age?\"];\n  var choices = [[\"Male\", \"Female\", \"Non Binary\", \"Prefer Not To Say\"], [\"00 years\", \"01-04 years\", \"05-09 years\", \"10-14 years\", \"15-19 years\", \"20-24 years\", \"25-29 years\", \"30-34 years\", \"35-39 years\", \"40-44 years\", \"45-49 years\", \"50-54 years\", \"55-59 years\", \"60-64 years\", \"65-69 years\", \"70-74 years\", \"75-79 years\", \"80-84 years\", \"85+ years\"]];\n  var correct = [[true, true, true, true], [true, true, true, true]];\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    data = _useState2[0],\n    setData = _useState2[1];\n  var _useState3 = useState(undefined),\n    _useState4 = _slicedToArray(_useState3, 2),\n    uLocation = _useState4[0],\n    setLocation = _useState4[1];\n  var _useState5 = useState(0),\n    _useState6 = _slicedToArray(_useState5, 2),\n    qNum = _useState6[0],\n    setqNum = _useState6[1];\n  return _jsx(SafeAreaView, {\n    style: styles.MainContainer,\n    children: _jsxs(ScrollView, {\n      style: {\n        height: '100%'\n      },\n      children: [_jsx(Text, {\n        style: styles.header,\n        children: \"Help us help people!\"\n      }), _jsx(MainText, {\n        text: \"We want to know a little about you so we can analyze how people are learning.\"\n      }), !uLocation && _jsx(CountryPicker, {\n        withEmoji: true,\n        onSelect: function onSelect(country) {\n          setLocation(country.name);\n        }\n      }), uLocation && _jsxs(Text, {\n        children: [questions[qNum], \" \"]\n      }) && choices[qNum] && choices[qNum].map(function (item, key) {\n        return _jsx(Pressable, {\n          onPress: function onPress() {\n            var temp = data;\n            temp.push(key);\n            setData(temp);\n            console.log(qNum);\n            if (qNum >= choices.length - 1) {\n              console.log(\"working\");\n              db.transaction(function (txn) {\n                txn.executeSql('UPDATE table_demographics SET location=?, gender=?, age=? WHERE d_id=1', [uLocation, choices[0][data[0]], choices[1][data[1]]], function (txn, results) {\n                  console.log('Results', results.rowsAffected);\n                  if (results.rowsAffected > 0) {\n                    Alert.alert('Thank You!', \"ðŸ˜‡Personal Info is updated! Please go back to the HomePage ðŸ˜‡\", [{\n                      text: 'Return Home',\n                      onPress: function onPress() {\n                        return navigation.navigate('HomeScreen');\n                      }\n                    }], {\n                      cancelable: false\n                    });\n                  } else {\n                    alert('Local Upload Failed');\n                  }\n                }, function (txn, error) {\n                  console.log(error);\n                });\n              });\n            }\n            setqNum(qNum + 1);\n          },\n          style: [styles.button],\n          children: _jsx(Text, {\n            style: [styles.text],\n            children: item\n          }, key)\n        });\n      })]\n    })\n  });\n};\nvar styles = StyleSheet.create({\n  button: {\n    alignItems: 'center',\n    backgroundColor: '#02353c',\n    color: '#02353c',\n    padding: 20,\n    marginTop: 16,\n    marginLeft: 35,\n    marginRight: 35,\n    borderRadius: 20\n  },\n  text: {\n    color: '#dbb42b',\n    fontSize: 20\n  },\n  MainContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#dbb42b'\n  },\n  header: {\n    justifyContent: 'center',\n    alignItems: 'center',\n    textAlign: 'center',\n    fontSize: 30,\n    color: 'black',\n    padding: 10\n  }\n});\nexport default DemographicQuiz;","map":{"version":3,"names":["React","useState","useEffect","TouchableOpacityComponent","Quiz","SQLite","NavButton","MainText","ViewVideos","CountryPicker","db","openDatabase","DemographicQuiz","navigation","route","questions","choices","correct","data","setData","undefined","uLocation","setLocation","qNum","setqNum","styles","MainContainer","height","header","country","name","map","item","key","temp","push","console","log","length","transaction","txn","executeSql","results","rowsAffected","Alert","alert","text","onPress","navigate","cancelable","error","button","StyleSheet","create","alignItems","backgroundColor","color","padding","marginTop","marginLeft","marginRight","borderRadius","fontSize","flex","justifyContent","textAlign"],"sources":["/Users/shravun/Desktop/Dev/visiontales-app/iSight-MobileApp-main-2/VisionTalesAdmin/pages/DemographicQuiz.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { FlatList, Text, ScrollView, SafeAreaView, TextInput, Pressable, StyleSheet, Alert, TouchableOpacityComponent } from 'react-native';\nimport Quiz from './components/QuizQuestion';\nimport * as SQLite from 'expo-sqlite';\nimport NavButton from './components/NavButton';\nimport MainText from './components/MainText';\nimport ViewVideos from './ViewVideos';\nimport CountryPicker from 'react-native-country-picker-modal';\n\nvar db = SQLite.openDatabase('VisionTalesDB.db');\n\nconst DemographicQuiz = ({ navigation, route }) => {\n\n  // Variables for quiz\n  let questions = [\"What is your gender?\", \"What is your age?\"];\n  let choices = [\n    [\n      \"Male\",\n      \"Female\",\n      \"Non Binary\",\n      \"Prefer Not To Say\"\n    ],\n    [\n      \"00 years\",\n      \"01-04 years\",\n      \"05-09 years\",\n      \"10-14 years\",\n      \"15-19 years\",\n      \"20-24 years\",\n      \"25-29 years\",\n      \"30-34 years\",\n      \"35-39 years\",\n      \"40-44 years\",\n      \"45-49 years\",\n      \"50-54 years\",\n      \"55-59 years\",\n      \"60-64 years\",\n      \"65-69 years\",\n      \"70-74 years\",\n      \"75-79 years\",\n      \"80-84 years\",\n      \"85+ years\"\n    ]\n  ];\n  let correct = [\n    [true, true, true, true],\n    [true, true, true, true]\n  ];\n\n  const [data, setData] = useState([]);\n  const [uLocation, setLocation] = useState(undefined);\n  const [qNum, setqNum] = useState(0);\n\n    return (\n        <SafeAreaView style={styles.MainContainer}>\n            <ScrollView style={{ height: '100%' }}>\n\t    <Text style={styles.header}>Help us help people!</Text>\n\t    <MainText text='We want to know a little about you so we can analyze how people are learning.' />\n            {!uLocation && (\n              <CountryPicker withEmoji\n                onSelect={(country) => {\n                  setLocation(country.name)\n                }}\n              />\n            )}\n\n            {uLocation && (\n                <Text>{questions[qNum] } </Text>)\n              && choices[qNum] && (\n                choices[qNum].map((item, key) =>(\n                  <Pressable onPress={() => {\n                    let temp = data;\n                    temp.push(key)\n                    setData(temp)\nconsole.log(qNum);\n                    // If we answered the last question\n                    if (qNum >= choices.length - 1) {\n\t\t\t    console.log(\"working\");\n\t\t      // Begin deleting Table\n\t\t      /*db.transaction(function (txn) {\n      \t\t\ttxn.executeSql(\"DELETE FROM table_demographics WHERE EXISTS (SELECT * FROM table_demographics)\", []);\n      \t\t\tconsole.log(\"deleted\");\n    \t\t      });*/\n                      // Insert response into table\n                      db.transaction(function (txn) {\n                        txn.executeSql(\n                          'UPDATE table_demographics SET location=?, gender=?, age=? WHERE d_id=1',\n                          [uLocation, choices[0][data[0]], choices[1][data[1]]],\n                          (txn, results) => {\n                            console.log('Results', results.rowsAffected);\n                            if (results.rowsAffected > 0) {\n                              Alert.alert(\n                                'Thank You!',\n\t\t\t\t\"ðŸ˜‡Personal Info is updated! Please go back to the HomePage ðŸ˜‡\",\n                                [\n                                  {\n                                    text: 'Return Home',\n                                    onPress: () => navigation.navigate('HomeScreen'),\n                                  },\n                                ],\n                                  { cancelable: false }\n                              );\n                            } else {\n                              alert('Local Upload Failed');\n                            }\n                          },\n\t\t\t  (txn, error) => {\n\t\t\t    console.log(error);\n\t\t\t  }\n                        );\n                      });\n                    }\n                    \n                    // Increment our question counter\n                    setqNum(qNum + 1)\n                  }\n                  } style={[styles.button]}>\n                    <Text style={[styles.text]} key={key}>{item}</Text>\n                  </Pressable>\n                ))\n              )\n            }\n            </ScrollView>\n        </SafeAreaView>\n    );\n};\n\nconst styles = StyleSheet.create({\n  button: {\n    alignItems: 'center',\n    backgroundColor: '#02353c',\n    color: '#02353c',\n    padding: 20,\n    marginTop: 16,\n    marginLeft: 35,\n    marginRight: 35,\n    borderRadius: 20,\n  },\n  text: {\n    color: '#dbb42b',\n    fontSize: 20,\n  },\n  MainContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#dbb42b',\n  },\n  header: {\n    justifyContent: 'center',\n    alignItems: 'center',\n    textAlign: 'center',\n    fontSize: 30,\n    color: 'black',\n    padding: 10,\n  }\n});\n\nexport default DemographicQuiz;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}